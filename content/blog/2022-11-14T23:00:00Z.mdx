---
date: 2022-11-14T23:00:00Z
title: 'Decoding Flutterã®ã¾ã¨ã‚'
thumbnail: 'https://res.cloudinary.com/dso4npatn/image/upload/v1670180376/media/blog/thumbnail/Decoding_Flutter_hcbbh9.png'
tag:
  - ãƒã‚¤ãƒ†ã‚£ãƒ–é–‹ç™º
---

Flutter å…¬å¼ãŒ Flutter å†…éƒ¨ã®ä»•çµ„ã¿ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ Youtube ã®å‹•ç”»ãƒªã‚¹ãƒˆ[Decoding Flutter](https://www.youtube.com/playlist?list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl)ã‚’è¦–è´ã—ã¦æ°—ã«ãªã£ãŸå‹•ç”»ã‚’è‡ªåˆ†ã§æŒ¯ã‚Šè¿”ã‚‹ãŸã‚ã«è¨˜äº‹ã«ã¾ã¨ã‚ã¦ã¿ãŸã€‚ä»•çµ„ã¿ç·¨ã¨å®Ÿè£…ç·¨ã¨æ–‡æ³•ç·¨ã§åˆ†ã‘ã¦ã„ã‚‹ã€‚

## ä»•çµ„ã¿ç·¨

### ãƒ»[ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼Ÿï¼Ÿ](https://www.youtube.com/watch?v=sgPQklGe2K8&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=24)

ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã¯ Widget ãƒ„ãƒªãƒ¼å…¨ä½“ã§ã™ã¹ã¦ã® Widget ã®`build`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã€‚

- **`build`ãƒ¡ã‚½ãƒƒãƒ‰å†…ã‚’æ›´æ–°ã—ãŸå ´åˆ**ã¯ã€`r`ã‚³ãƒãƒ³ãƒ‰ã§ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ç”»é¢ã®æ›´æ–°ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚
- Widget ã‚’ Stateless ã‹ã‚‰ Statefull ã«å¤‰æ›´ã—ãŸã‚Šã€`initState`ãƒ¡ã‚½ãƒƒãƒ‰ã‚„`dispose`ãƒ¡ã‚½ãƒƒãƒ‰å†…ã‚’æ›´æ–°ã—ãŸã‚Š **`build`ãƒ¡ã‚½ãƒƒãƒ‰ä»¥å¤–ã‚’æ›´æ–°ã—ãŸå ´åˆ** ã¯ã€`R`ã‚³ãƒãƒ³ãƒ‰ã§ãƒ›ãƒƒãƒˆãƒªã‚¹ã‚¿ãƒ¼ãƒˆãŒå¿…è¦ã«ãªã‚‹ã€‚

### ãƒ»[BuildContext ã¨ã¯ï¼Ÿ](https://www.youtube.com/watch?v=rIaaH87z1-g&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=22)

```dart:è‰²ã€…ãªå ´é¢ã§ä½¿ã‚ã‚Œã‚‹BuildContext
Widget build(BuildContext context) {
  Navigator.of(context) ...
  MediaQuery.of(context) ...
  ListView.builder(
    itemBuilder: (context, index) {}
  ),
}
```

`build`ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ˆãç›®ã«ã™ã‚‹`BuildContext`ã¨ã¯ã€ŒWidget ãŒãƒ„ãƒªãƒ¼å…¨ä½“ã®ã©ã“ã«å­˜åœ¨ã™ã‚‹ã‹ã‚’æŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ãŸã‚ã®ã‚‚ã®ã€‚

![](https://res.cloudinary.com/dso4npatn/image/upload/v1670180723/media/blog/insert/Screenshot_2022-12-05_at_4.05.00_ghemaf.png)

ãã‚‚ãã‚‚ Widget è‡ªèº«ã¯ä½œæˆã•ã‚ŒãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒãƒ„ãƒªãƒ¼å…¨ä½“ã®ã©ã“ã«å­˜åœ¨ã™ã‚‹ã‹ã‚’æŠŠæ¡ã—ã¦ã„ãªã„ã€‚

å†…éƒ¨çš„ã«ã¯ StatelessWidget ã‚„ StatefulWidget ã«ã¯`createElement()`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ã“ã® Element ã¯ Widget ã®å ´æ‰€ã‚„è¦ªå­é–¢ä¿‚ã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã® Element ãƒ„ãƒªãƒ¼ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚ãã‚Œã‚‰ã®è¿½è·¡æƒ…å ±(Element)ãŒ BuildContext ã«ãªã£ã¦ã„ã‚‹ã€‚(`abstract class Element implements BuildContext`)
ã¡ãªã¿ã« Element ã¯ State ã‚’ä¿æŒã—ã¦ã„ã‚‹ã€‚

### ãƒ»["Viewport was given unbounded height" ã‚¨ãƒ©ãƒ¼ã®è©±](https://www.youtube.com/watch?v=jckqXR5CrPI&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=20)

```dart:ListViewã‚’Columnã«å…¥ã‚Œã‚‹ã¨ã‚ˆãã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚‹ä¾‹
Column(
  children: [
    MyWidget(),
    ListView(children ...), // ListViewã¯ç„¡é™ã®é«˜ã•(inifinity)ã‚’è¦ªWidgetã®Columnã«è¦æ±‚
  ],
),
```

ãªãœè¦ª Widget(`Column`)ã¯å­ Widget ã®è¦æ±‚ã‚’èã„ã¦å—ã‘å…¥ã‚Œã‚ˆã†ã¨ã™ã‚‹ã®ã‹ï¼Ÿå­ Widget ãŸã¡(`MyWidget`ã‚„`ListView`)ã«ã€ŒãŠå‰ãŸã¡ã®ã‚µã‚¤ã‚ºã¯ä¿ºã®é«˜ã•ã¾ã§ãŒé™ç•Œã ã€ã¨ã„ã£ã¦ã‚„ã‚‰ãªã„(Fluuter ã®ä»•æ§˜)ã‚ˆã†ã«ã—ãªã‹ã£ãŸã®ã‹ï¼Ÿ

ç­”ãˆã¯ã€ãã®ã‚ˆã†ã«ã—ã¦ã—ã¾ã†ã¨ Flutter å†…éƒ¨ã®å®Ÿè£…ã¨ã—ã¦ â‘  ã‚¨ãƒ©ãƒ¼ã¯å‡ºãªããªã‚‹ãŒé–‹ç™ºè€…ãŒãªãœãã„ã†ã„ã†ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ãªã‚‹ã®ã‹ã‚’ç†è§£ã—ã¥ã‚‰ããªã‚‹ â‘¡ ä»®ã«è¦ªå­é–“ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’èª¿æ•´ã™ã‚‹è¨ˆç®—å‡¦ç†ã‚’å…¥ã‚Œã‚‹ãªã‚‰é€Ÿåº¦ãŒé…ããªã£ã¦ã—ã¾ã†ã“ã¨ã«ã‚ˆã‚‹ã€‚
ã“ã®ä¾‹ã ã¨ã€`ListView`ãŒè¦ªã®é«˜ã•ã‚’æŒ‡å®šã—ãŸå ´åˆ`MyWidget`ãŒæ¶ˆæ»…ã—ã¦é–‹ç™ºè€…ã‹ã‚‰ã™ã‚‹ã¨ãªãœ`MyWidget`ãŒæ¶ˆæ»…ã—ãŸã‹ã‚ã‹ã‚‰ãªããªã‚‹ã€‚

Flutter ã§ã¯ã“ã®è§£æ±ºç­–ã¨ã—ã¦ã€ã€Œ**å­ Widget ãŒè¦æ±‚ã™ã‚‹ã‚µã‚¤ã‚ºã‚’æ˜ç¤ºã™ã‚‹**ã€ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã‚‹ã€‚

æœ€å¤§é™ã®ã‚µã‚¤ã‚ºã‚’è¦æ±‚ã™ã‚‹å ´åˆã¯`Expanded`ã‚„`Flexible`ã€ä¸€å®šã®ã‚µã‚¤ã‚ºã‚’è¦æ±‚ã™ã‚‹å ´åˆã¯`SizedBox`ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã€‚

```dart
Column(
  children: [
    MyWidget(),
    SizedBox(
      height: 42,
      ListView(children ...),
    ),
  ],
),
```

### ãƒ»[Flutter ã§ã® packaget ã¨ plugin ãŒç¤ºã™ã‚‚ã®](https://www.youtube.com/watch?v=Y9WifT8aN6o&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=19)

- **package** ... Dart ã‚³ãƒ¼ãƒ‰ã§æ›¸ã‹ã‚ŒãŸä¾¿åˆ©ãªè¿½åŠ æ©Ÿèƒ½ã€‚
- **plugin** ... Java, Kotlin, Objective-C, Swift, Javascript ãªã©ã§æ›¸ã‹ã‚ŒãŸãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ä¾å­˜ã™ã‚‹ package ã®ã“ã¨ã‚’æŒ‡ã™ã€‚

### ãƒ»[RenderObject ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=zmbmrw07qBc&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=17)

Widget ã§æŠ½è±¡åŒ–ã•ã‚Œã¦ã„ã¦ Flutter é–‹ç™ºã§ã¯é–‹ç™ºä¸­ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸Šç›®ã«ã™ã‚‹ã“ã¨ã¯å°‘ãªã„ãŒç”»é¢ä¸Šã«ã¯ RenderObject ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€‚
RenderObject ã¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€æå†™ã€ãƒ’ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®å‡¦ç†ã‚’è¡Œã†ã€‚

![](https://res.cloudinary.com/dso4npatn/image/upload/v1670180724/media/blog/insert/Screenshot_2022-12-05_at_4.04.45_zgagrh.png)

`Widget - Element - RenderObject`ã§ãƒ„ãƒªãƒ¼æ§‹é€ ãŒé€£å‹•ã—ã¦ã„ã‚‹ã€‚Widget ãƒ„ãƒªãƒ¼ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ Element ãƒ„ãƒªãƒ¼ã‚‚ RenderObject ãƒ„ãƒªãƒ¼ã‚‚é€£å‹•ã—ã‚ˆã†ã¨ã™ã‚‹ã€‚
Widget ã«ã‚­ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã‚‹ç†ç”±ã¯ã“ã‚Œã‚‰ã®é€£å‹•ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚([When to Use Keys](https://www.youtube.com/watch?v=kn0EOS-ZiIc)ã«è©³ã—ã„èª¬æ˜ãŒã‚ã‚‹)

<img
  src="https://res.cloudinary.com/dso4npatn/image/upload/v1670180723/media/blog/insert/Screenshot_2022-12-05_at_4.04.27_y6xj8h.png"
  width="540px"
/>
<br />
<br />

`RenderObjectElement`ã‚¯ãƒ©ã‚¹ã‚„`RenderObjectWidget`ã‚¯ãƒ©ã‚¹ã‚’æ‹¡å¼µã—ã¦æç”»ã‚’ã‚«ã‚¹ã‚¿ãƒ ã§ãã‚‹ãŒã‹ãªã‚Šè¤‡é›‘ãªã‚¯ãƒ©ã‚¹ãªã®ã§ã€åŸºæœ¬ã¯æŠ½è±¡åŒ–ã•ã‚ŒãŸ Widget ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã€‚Flutter ã‚¢ãƒ—ãƒªå†…ã§ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã«ãƒšã‚¤ãƒ³ãƒˆ(è‡ªç”±ãªãŠçµµæã)ã‚’ã—ãŸã„ã®ã§ã‚ã‚Œã° [CustomPaint](https://api.flutter.dev/flutter/widgets/CustomPaint-class.html) Widget ã‚’ä½¿ã†ã¨è‰¯ã„ã€‚

### ãƒ»[ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿](https://www.youtube.com/watch?v=54yoCqkew6g&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=16)

1~3 ã«ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ â†’Widget ã® build ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å—ã‘ã¦ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°(ãƒ„ãƒªãƒ¼ã®æç”»)ãŒå§‹ã¾ã‚‹ã€‚
ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«ç™ºç”Ÿã™ã‚‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€æç”»ã€åˆæˆã€ãƒ©ã‚¹ã‚¿ãƒ©ã‚¤ã‚ºåŒ–ãªã©ã®æ©Ÿèƒ½ã‚’ RenderObject ãŒæ‹…ã†ã€‚æœ€é©åŒ–ã™ã‚‹ã«ã‚ãŸã£ã¦`Layer Tree`ã¨ã„ã†ã®ã‚’æ§‹ç¯‰ã—ã¦ RenderObject ã®å†è¨ˆç®—ã‚’å°‘ãªãã™ã‚‹ã€‚

![73d40570.png](https://res.cloudinary.com/dso4npatn/image/upload/v1670180723/media/blog/insert/Screenshot_2022-12-05_at_4.04.11_gga6lc.png)

### ãƒ»[ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼æ¤œå‡ºã®è£å´](https://www.youtube.com/watch?v=Q85LBtBdi0U&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=1)

ã‚¿ãƒƒãƒ—ãƒ»ã‚¯ãƒªãƒƒã‚¯ãƒ»ãƒ‰ãƒ©ãƒƒã‚°ãªã©ã‚¸ã‚§ã‚¹ãƒãƒ£ã®èªè­˜ã«ã¯[GestureDetector](https://api.flutter.dev/flutter/widgets/GestureDetector-class.html)ã‚’ä½¿ã£ã¦ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²ã™ã‚‹ãŒã€ãã®éš›ã«`GestureRecognizer`ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚`GestureRecognizer`ã§ã¯ç”»é¢ä¸Šã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ“ä½œã—ãŸç”Ÿã®åº§æ¨™ãŒå–å¾—ã•ã‚Œã‚‹ã€‚

```dart:ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œåº§æ¨™ã‚’å–å¾—ã™ã‚‹ä¾‹
Listener(
  onPointerDown: (PointerEvent event) {},
  onPointerUp: (PointerEvent event) {},
  onPointerMove: (PointerEvent event) =>
    print('${event.position} @ ${event.timeStamp}'),
)
```

ãã—ã¦`GestureDetector`ã¯`GestureRecognizer`ã‹ã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¦‹ã¦ãã‚Œã‚‰ãŒã€ã‚¿ãƒƒãƒ—ãªã®ã‹ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ãªã®ã‹é•·æŠ¼ã—ãªã®ã‹ã‚’åˆ¤æ–­ã—ã¦ã„ã‚‹ã€‚

1. ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã®èªè­˜æ©Ÿèƒ½ã¯ã„ã¤ã§ã‚‚æ•—åŒ—å®£è¨€ã§ãã‚‹
2. ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã®èªè­˜æ©Ÿèƒ½ã¯ã„ã¤ã§ã‚‚å‹åˆ©å®£è¨€ã§ãã‚‹
3. æœ€å¾Œã® 1 ã¤ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ãŒæ®‹ã‚‹ã¾ã§æˆ¦ã„ã¯ç¶šã

â†“ ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—(doubleTapRecogniner)ãŒã‚¿ãƒƒãƒ—(tapRecognizer)ã‚’ç ´ã‚Šå‹åˆ©ã—ãŸæ§˜å­ã®ç–‘ä¼¼ã‚³ãƒ¼ãƒ‰(æœ€åˆã®ã‚¿ãƒƒãƒ—æ“ä½œå¾Œã‚¿ã‚¤ãƒãƒ¼ã‚’ä»•è¾¼ã‚“ã§ãã‚Œä»¥å†…ã«ã¾ãŸã‚¿ãƒƒãƒ—æ“ä½œãŒè¡Œã‚ã‚ŒãŸã®ã§ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã ã¨æ¤œå‡ºã•ã‚ŒãŸ)
![](https://res.cloudinary.com/dso4npatn/image/upload/v1670180723/media/blog/insert/Screenshot_2022-12-05_at_4.04.00_ktslu5.png)

### ãŠã¾ã‘: Flutter å†…éƒ¨ã®ä»•çµ„ã¿ã«ã¤ã„ã¦ã‚ã‹ã‚Šã‚„ã™ãæ›¸ã‹ã‚ŒãŸè¨˜äº‹

> - [Inside Flutter \| Flutter](https://docs.flutter.dev/resources/inside-flutter)
> - [Flutter architectural overview \| Flutter](https://docs.flutter.dev/resources/architectural-overview#architectural-layers)
> - [Flutter ã® Widget ãƒ„ãƒªãƒ¼ã®è£å´ã§èµ·ã“ã£ã¦ã„ã‚‹ã“ã¨. Widgetãƒ»Stateãƒ»Elementãƒ»RenderObjectâ€¦ \| by mono ï£¿ | Flutter ğŸ‡¯ğŸ‡µ | Medium](https://medium.com/flutter-jp/dive-into-flutter-4add38741d07)

## å®Ÿè£…ç·¨

### ãƒ»[ãƒã‚¹ãƒˆã—ãŸ ListView](https://www.youtube.com/watch?v=LUqDNnv_dh0&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=15)

ListView ã®ä¸­ã« ListView ã‚’å®šç¾©ã™ã‚‹ã¨è¡¨ç¤ºé ˜åŸŸã‚µã‚¤ã‚ºãŒç„¡åˆ¶é™ã«ãªã‚Šã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚ListView Widget ã®`shrinkWrap`ã‚’`true`ã«ã™ã‚‹ã¨å­ãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹ Widget ã‚’å¼·åˆ¶çš„ã«è¦‹ç©ã‚‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã—ã‹ã—å­ãƒªã‚¹ãƒˆã«å¤šãã® Widget ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ã¦ã—ã¾ã†ã€‚

```dart:shrinkWrapã‚’ä½¿ã£ãŸå ´åˆ
final outerListChildren = <ListView>[
  ListView(
    shrinkWrap: true,
    physics: const NeverScrollableScrollPhysics(),
    children: <Widget>[...]
  ),
  ...
];

return ListView.builder(
  itemCount: outerListChildren.length,
  itemBuilder: (context, index) {
    return outerListChildren[index];
  }
);
```

ã“ã®ãƒªã‚¹ã‚¯ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®ã‚ˆã†ã« ListView ã‚’å¤‰æ›´ã™ã‚‹ã¨è‰¯ã„ã€‚

1. ListView.builder ã‚’ CustomScrollView ã«ç½®ãæ›ãˆã‚‹
2. ãƒã‚¹ãƒˆã•ã‚Œã‚‹å­ã® ListView(`outerListChildren`)ã‚’ SliverList ã«å¤‰æ›´ã™ã‚‹
3. å­ã® ListView ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’`SliverChildBuilderDelegate`(ã¾ãŸã¯`SliverChildListDelegate`)ã§ç”Ÿæˆã™ã‚‹

```dart:Sliverã‚’ä½¿ã£ãŸå ´åˆ
final outerListChildren = <SliverList>[
  SliverList(
    delegate: SliverChildBuilderDelegate(
      (context, index) => _myWidgets[index],
      childCount: _myWidets.length,
    ),
  ),
  ...
];

return CustomScrollView(
  children: outerListChildren
);
```

### ãƒ»[ã‚¯ãƒ©ã‚¹ Widget(å€‹åˆ¥ Widget) vs é–¢æ•° Widget(ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰)](https://www.youtube.com/watch?v=IOyq-eTRhvo&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=14)

ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’åˆ‡ã‚Šå‡ºã™éš›ã«ã€ã‚¯ãƒ©ã‚¹ Widget ã‚ã‚‹ã„ã¯é–¢æ•° Widget ã©ã¡ã‚‰ã§è¿”ã™ã¹ããªã®ã‹ï¼Ÿ

```dart:ã‚¯ãƒ©ã‚¹Widget vs é–¢æ•°Widget
// ã‚¯ãƒ©ã‚¹Widget
Class MyListTile extends StatelessWidget {
  const MyListWidget({
    key?: key,
    required this.title,
  }) : super(key: key);

  final String title;

  @override
  Widget build(BuildContext context) {
    return ListTile(
      title: Text(title),
    );
  }
}

// é–¢æ•°Widget
Widet _builderWidget(String title) {
  return ListTile(
    title: Text(title),
  );
}
```

é–¢æ•° Widget ã®æ–¹ãŒè¨˜è¿°é‡ãŒå°‘ãªãåŠ¹ç‡çš„ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€**ã‚¯ãƒ©ã‚¹ Widget ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¨å¥¨ã§ã‚ã‚‹**ã€‚
é–¢æ•° Widget ã®å ´åˆã€ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ å†…ã® state ã«å¤‰åŒ–ãŒèµ·ã“ã‚‹å ´åˆã«ãã®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã ã‘ã§ãªãã€ãƒªã‚¹ãƒˆ Widget å…¨ä½“ã‚’ãƒªãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã«ãªã‚Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä½ä¸‹ã•ã›ã¦ã—ã¾ã†ã€‚ä»–ã«ã‚‚ãƒ†ã‚¹ãƒˆã®ã—ã‚„ã™ã•ã‚„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ã—ã‚„ã™ã•ã®é¢ã‹ã‚‰ã‚‚ã‚¯ãƒ©ã‚¹ Widget ã‚’ä½¿ã£ãŸæ–¹ãŒè‰¯ã„ã€‚

### ãƒ»[ä»®æƒ³ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã«å¯¾å¿œã™ã‚‹](https://www.youtube.com/watch?v=ceCo8U0XHqw&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=12)

```dart
final MediaQueryData mediaQueryData = MediaQuery.of(context);
```

`MediaQueryData`ã®ä¸­ã«`padding`, `viewPadding`, `viewInsets`ã® 3 ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã™ã‚‹ã€‚

- `padding`...ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨`padding.bottom`ã¯æ¶ˆæ»…ã™ã‚‹
- `viewPadding`...ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨`viewPadding.bottom`ã¯ç¶­æŒã•ã‚Œã‚‹
- `viewInsets`...ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®é«˜ã•é ˜åŸŸåˆ†ã‚’æŒ‡å®šã™ã‚‹

> ###### ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
>
> https://dartpad.dev/?id=b0d016329a88863670d9e9a8f0789245

### ãƒ»[MaterialStateProperty ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=CylXr3AF3uU&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=10)

[MaterialState (material_state.dart ãƒ•ã‚¡ã‚¤ãƒ«) ](https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/material/material_state.dart)ã¨ã¯`hovered`, `pressed`, `focused`, `disabled`ãªã©ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãª State ã‚’ Enum ã§è¡¨ç¾ã—ãŸã‚‚ã®ã€‚

```dart
// MaterialStatePropertyã‚’ä½¿ã£ãŸåŸºæœ¬çš„ãªæ›¸ãæ–¹
Color? getColor(Set<MaterialState> states) => Colors.blue;
TextButton(
  style: ButtonStyle(
    backgroundColor: MaterialStateProperty.resolveWith(
      getColor,
    ),
  )
)

// (ã™ã¹ã¦ã®MaterialStateã«å¯¾ã—ã¦èƒŒæ™¯è‰²é’è‰²ã‚’é©ç”¨ã™ã‚‹å ´åˆã®æ›¸ãæ–¹)
Color? getColor(Set<MaterialState> states) => Colors.blue;
TextButton(
  style: ButtonStyle(
    backgroundColor: MaterialStateProperty.all(Colors.blue),
  )
)

// MaterialStateã«å¿œã˜ãŸgetColorã®æ›¸ãåˆ†ã‘
@override
Widget build(BuildContext context) {
  Color? getColor(Set<MaterialState> states) {
    if (state.contains(MaterialState.focused) && states.contains(MaterialState.hovered)) {
      return mySpecialColor;
    } else if (state.contains(MaterialState.focused)) {
      return myFocusedColor;
    } else if (states.contains(MaterialState.hovered)) {
      return myHoveredColor;
    }
    return myDefaultColor;
  }

  return TextButton(
    style: ButtonStyle(
      backgroundColor: MaterialStateProperty.resolveWith(
        getColor,
      ),
    )
  );
}

// buildãƒ¡ã‚½ãƒƒãƒ‰å†…ã«getColorã‚’æ›¸ããŸããªã„ã®ã§ã“ã†ã™ã‚‹
class ButtonBackGroundColor implements MateraiStateProperty<Color?> {
  ButtonBackgroundColor(this.context);

  final BuildContext context;

  @override
  Color? resolve(Set<MaterialState> states) {
    if (state.contains(MaterialState.focused) && states.contains(MaterialState.hovered)) {
      return mySpecialColor;
    } else if (state.contains(MaterialState.focused)) {
      return myFocusedColor;
    } else if (states.contains(MaterialState.hovered)) {
      return myHoveredColor;
    }
    return myDefaultColor;
  }
}
TextButton(
  style: ButtonStyle(
    backgroundColor: ButtonBackGroundColor(context),
  )
)

```

### ãƒ»[ThemeExtension ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=8-szcYzFVao&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=9)

åŸºæœ¬çš„ã«ã¯ Widget ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ â‘ Widget ã«ç›´æ¥æŒ‡å®šã—ãŸã‚¹ã‚¿ã‚¤ãƒ« â‘¡ ãƒ†ãƒ¼ãƒã§æŒ‡å®šã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ã®é †ã§é©ç”¨ã•ã‚Œã‚‹ã€‚ãƒ†ãƒ¼ãƒã«æ²¿ã£ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã«ãªã‚‹ã‚‚ã®ã®é›£ç‚¹ã¨ã—ã¦ã¯ã»ã¨ã‚“ã©ã® Widget ãŒãƒ†ãƒ¼ãƒã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãªã£ã¦ã—ã¾ã†ã€‚
ãã“ã§ã©ã†ã—ã¦ã‚‚ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã¨ Widget æƒ…å ±ã‚’åˆ†é›¢ã—ã¦æ‰±ã„ãŸã„å ´åˆã¯ã€`ThemeData`ã®`extensions`ã‚’ä½¿ã†ã€‚

```dart
// ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ(HeroCard)ã®ã‚¹ã‚¿ã‚¤ãƒ«
class HeroCardStyle extends ThemeExtension<HeroCardStyle> {
  const HeroCardStyle((
    required this.backgroundColor,
    required this.borderRadius,
  ))

  final Color backgroundColor;
  final double borderRadius;

  @override
  HeroCardStyle copyWith({
    Color?: backgroundColor,
    double?: borderRadius,
  }) => HeroCardStyle(
    backgroundColor: backgrounColor ?? this.backgrounColor,
    borderRadius: borderRadius ?? this.borderRadius,
  );

  @override
  HeroCardStyle lerp(ThemeExtension<HeroCardStyle>? other, double t) {
    if (other is! HeroCardStyle) {
      return this
    }

    return HeroCardStyle(
      backgroundColor: Color.lerp(backgroundColor, other.backgroundColor, t),
      borderRadius: lerpDouble(borderRadius, other.borderRadius, t),
    )
  }
}

// ãƒ†ãƒ¼ãƒã®æ‹¡å¼µ
ThemeData(
  extensions: ThemeExtensions<dynamic>(
    HeroCardStyle(
      backgroundColor: Colors.gray[100],
      borderRadius: 20,
    )
  )
)

// ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
Class HeroCard extends StatelessWidget {
  const HeroCard({
    key?: key,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    HeroCardStyle defaultStyle = Theme.of(context).extension<HeroCardStyle>();

    Color backgroundColor = style?.backgroundColor ?? defaultStyle?.backgroundColor;
    borderRadius borderRadius = style?.borderRadius ?? defaultStyle?.borderRadius;

    return Widgets(
      backgroundColor: backgrounColor,
      borderRadius: borderRadius,
      child: ...,
    )
  }
}
```

### ãƒ»[inheritedWidget ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=og-vJqLzg2c&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=7)

inheritedWidget ã¨ã¯ã€BuildContext ã‚’ä½¿ã£ã¦ AppState ã®æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ Widget ã®ã“ã¨ã§ã‚ã‚‹ã€‚(ä»£è¡¨çš„ãªä¾‹ã¨ã—ã¦ã¯`MeidaQuery.of(context)`ã‚„`Theme.of(context)`ãªã©)

```dart:MeidaQuery.ofã®ä¾‹
static MediaQueryData of(BuildContext context) {
  assert(context != null);
  assert(debugCheckHasMediaQuery(context));
  return context.dependOnInheritedWidgetOfExactType<MediaQuery>()!.data; //ã“ã®dependOnInheritedWidgetOfExactTypeãƒ¡ã‚½ãƒƒãƒ‰ã§ä¾å­˜æ€§ã«didChangeDependencies()ãŒåå¿œã™ã‚‹
}
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã¯`initState`ã‚„`dispose`å†…ã§ã¯å‘¼ã³å‡ºã›ãªã„ã€‚(ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦æ­£å½“ã§ã¯ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†)
`of`ãƒ¡ã‚½ãƒƒãƒ‰ã®é…ç½®å ´æ‰€ã¯é€šå¸¸`build()`ã«è¨˜è¿°ã™ã‚‹ã®ãŒ 99%æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³ã ãŒã€inheritedWidget ã«ã‚ˆã£ã¦é‡ã„è¨ˆç®—(ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©)ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆã¯`didChangeDependencies()`ã«è¨˜è¿°ã™ã‚‹ã€‚

### ãƒ»[éåŒæœŸå‡¦ç†ã‚’ã—ãŸå¾Œã® BuildContext ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=bzWaMpD1LHY&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=6)

Flutter ã® Linter ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒ[use_build_context_synchronously](https://dart-lang.github.io/linter/lints/use_build_context_synchronously.html)ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚

```dart
ElevatedButton(
  onPressed: () async {
    final result = await stateManagement.apiRequest();
    if(result is Success) {
      ScaffoldMessenger.of(context).showSnackBar( // ğŸš«use_build_context_synchronously
        SnackBarSuccess(),
      );
    } else {
      ScaffoldMessenger.of(context).showSnackBar( // ğŸš«use_build_context_synchronously
        SnackBarError(result.error),
      );
    }
  }
)

```

å‰æã¨ã—ã¦**Flutter ã®ãƒ“ãƒ«ãƒ‰ã¯ 100%åŒæœŸå‡¦ç†ã§è¡Œã‚ã‚Œã‚‹(=BuildContext ã¯å¸¸ã«åŒæœŸçš„)**ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§ Widget ãŒãƒ„ãƒªãƒ¼ã‹ã‚‰æ—¢ã«å‰Šé™¤ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€çµæœãŒä¸ç¢ºå®šãªéåŒæœŸå‡¦ç†ã‚’æŒŸã‚€ã¨ã‚¢ãƒ—ãƒªãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å¯èƒ½æ€§ãŒå‡ºã¦ã—ã¾ã†ã€‚

è§£æ±ºç­–ã®æ‰‹æ®µã¨ã—ã¦ã¯

1. `if(!mounted) return;`ã§ Widget ãŒãƒ„ãƒªãƒ¼ã‹ã‚‰æ—¢ã«å‰Šé™¤ã•ã‚Œã¦ã„ã‚Œã°æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã™ã‚‹
2. BuildContext ã‚’ä½¿ã†å ´åˆã¯å…ˆã«å¤‰æ•°ã«æ ¼ç´ã™ã‚‹ãªã©ã—ã¦ã€ãã®å¾Œã«éåŒæœŸå‡¦ç†ã‚’è¡Œã†ã‚ˆã†ã«ã™ã‚‹
3. `didChangeDependencies`ã‚’ä½¿ã†

```dart
// 1. if(!mounted) return;ã‚’ä½¿ã†ã€‚
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () async {
      final result = await stateManagement.submit();
      if(!mounted) return;
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(result.error),
      )
    },
    child: child
  );
}

// 2. å…ˆã«å¤‰æ•°ã«æ ¼ç´ã™ã‚‹ãªã©ã—ã¦ã€ãã®å¾Œã«éåŒæœŸå‡¦ç†ã‚’è¡Œã†ã‚ˆã†ã«ã™ã‚‹
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () async {
      final messenger = ScaffoldMessenger.of(context); // å…ˆã«æ ¼ç´
      final result = await stateManagement.submit();
      messenger.showSnackBar(
        SnackBar(result.error),
      )
    },
    child: child
  );
}

// 3. `didChangeDependencies`ã‚’ä½¿ã†
@override
void didChangeDependencies() {
  final ScreenSize = MediaQeuery.of(context).size;
  // only run calculations when necessary
  final cachedLayoutValues = calculations(screenSize);
  super.didChangeDependencies();
}

@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () => Future.delayed(const Duration(seconds: 3)),
    child: child
  );
}
```

### ãƒ»[Widget ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ãƒ‡ãƒãƒƒã‚°ã—ãŸã„ã¨ã](https://www.youtube.com/watch?v=DnC7eT-vh1k&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=5)

ã‚«ã‚¹ã‚¿ãƒ  Widget ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¦‹ã¤ã‘ã‚‹ã«ã¯ã€Developer ãƒ„ãƒ¼ãƒ«ã®ã€ŒWidget Details Treeã€ã‹ã‚‰æ¢ã—ã¦ã„ã‘ã°ã§ãã‚‹ãŒ[debugFillProperties](https://api.flutter.dev/flutter/widgets/State/debugFillProperties.html)ã‚’ä½¿ã†ã¨ã‚‚ã£ã¨ä¾¿åˆ©ã«å‡ºåŠ›ã§ãã‚‹ã€‚

```dart:FocusableListTileWidgetã«ãƒ‡ãƒãƒƒã‚°ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ä¾‹
@override
void debugFillProperties(DiagnosticPropertiesBuilder properties) {
  properties.add(IntProperty("index", index));
  super.debugFillProperties(properties);
}
```

![](https://res.cloudinary.com/dso4npatn/image/upload/v1670181661/media/blog/insert/Screenshot_2022-12-05_at_4.20.36_cyvm4n.png)

### ãƒ»[Intrinsic Widget ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=Si5XJ_IocEs&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=4)

Flutter ãŒãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ±ºã‚ã‚‹é€šå¸¸ã®åŸå‰‡ã¯ã€Œ**â‘  åˆ¶ç´„ã¯ä¸‹ä½ã¸ â‘¡ ã‚µã‚¤ã‚ºã¯ä¸Šä½ã¸ â‘¢ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯è¦ªãŒæ±ºå®šã™ã‚‹**ã€ã§ã‚ã‚‹ã€‚
ãŒã€æ™‚ã«ã¯å­ Widget ãŒå…„å¼Ÿ Widget ã¨åŒã˜ã‚µã‚¤ã‚ºã«ãªã‚ŠãŸã„å ´åˆãŒã‚ã‚‹ã€‚ãã“ã§`IntrinsicWidth`ã‚„`INtrinsicHeight`ã‚’ä½¿ã†ã€‚

```dart: InstrinsicHeight
IntrinsicHeight( // ğŸ‘ˆã“ã‚Œã ã‘ã§å­Widgeté”ã¯ä¸€ç•ªå¤§ãã„Widgetã«ã‚µã‚¤ã‚ºã‚’åˆã‚ã›ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
  child: Row(
    mainAxisAlignment: MainAxisAlignment.spaceEvenly,
    children: <Widget>[
      Align(
        alignment: Alignment.topCenter,
        child: Container(
          color: const Color(0xFF005BBB),
          height: 50,
          width: 50,
        ),
      ),
      Container(
        color: const Color(0xFFFFD500),
        height: 100,
        width: 100,
      ),
      Align(
        alignment: Alignment.bottomCenter,
        child: Container(
          color: const Color(0xFF005BBB),
          height: 75,
          width: 25,
        ),
      ),
    ],
  ),
),
```

ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå…¨ä½“ã‚’è¨ˆç®—ã—ã¦ã‹ã‚‰å–ã‚Šæ›ã‹ã‚‹ã®ã§ã€è² è·ã‚‚è€ƒãˆã‚‹ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¹°ã‚Šè¿”ã™ ListTile ãªã©ã§ã¯ä½¿ç”¨ã‚’é¿ã‘ãŸæ–¹ãŒè‰¯ã„ã€‚

### ãƒ»[PrimaryScrollController ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=33_0ABjFJUU&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=3)

> ğŸ‘‰ ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚„ Web ç‰ˆãªã©è¤‡æ•°ã® ListView ãŒç”»é¢ã«åŒæ™‚ã«å­˜åœ¨ã™ã‚‹ UI ã‚’ä½œæˆã™ã‚‹é–‹ç™ºè€…å‘ã‘ã®è©±
> ![](https://res.cloudinary.com/dso4npatn/image/upload/v1670180723/media/blog/insert/Screenshot_2022-12-05_at_4.03.46_etutyv.png)

`ScrollController`ã®`primary`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãŒã©ã® ListView ã¨ç´ä»˜ã„ã¦ã„ã‚‹ã®ã‹ã‚’æ˜ç¤ºã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

> https://api.flutter.dev/flutter/widgets/ScrollView/primary.html

## æ–‡æ³•ç·¨

### ãƒ»[å‹ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=2Cl0C-9dK48&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=8)

![](https://res.cloudinary.com/dso4npatn/image/upload/v1670180724/media/blog/insert/Screenshot_2022-12-05_at_4.03.38_cpnrua.png)

ä¸Šè¨˜ã®ä¾‹ã®ã‚ˆã†ã«ãªãœ`maybeString`ã¯å‹ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³(`maybeString`ãŒ String å‹ã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹ã“ã¨)ãŒè¡Œã‚ã‚Œãªã„ã®ã‹ï¼Ÿ
ç†ç”±ã¯**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ 2 å›ç›®ã®å‘¼ã³å‡ºã—ã§ç•°ãªã‚‹å‹ã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã‚‰**ã§ã‚ã‚‹ã€‚

```dart:å³å´ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹ã¨...
class UnreliableProvider {
  String? get maybeString =>
  /* Implementation of
    maybeString getter */

  void someMethod() {
    String? maybeStringLocal = maybeString; // ğŸ‘ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã«æ ¼ç´ã—ã¦å‹åˆ¤å®šã‚’ã™ã‚‹

    if (maybeStringLocal is String) {
      print(maybeStringLocal.length)
    } else {
      print("it wasn't a string!")
    }
  }
}
```

### ãƒ»[ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç­‰ä¾¡ã«ã¤ã„ã¦](https://www.youtube.com/watch?v=DCKaFaU4jdk&list=PLjxrf2q8roU1fRV40Ec8200rX6OuQkmnl&index=2)

[equatable ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://pub.dev/packages/equatable)ã‚’ä½¿ã†ã€‚å†…éƒ¨çš„ã«ã¯å„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹ãƒãƒƒã‚·ãƒ¥ã‚³ãƒ¼ãƒ‰ã‚’æ¯”è¼ƒã—ã¦ã„ã‚‹ã€‚

```dart
import 'package:equatable/equatable.dart';

class X extends Equatable {
  const X(this.value, this.label, this.flag);

  final int value;
  final String label;
  final bool flag;

  @override
  List<Object?> props => [value, label, flag]
}

final x1 = X(1, 'abc', true);
final x2 = X(1, 'abc', true);

print(x1 == x2); // true
```

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã«å¯¾è±¡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå«ã¾ã‚Œã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹æ™‚ã«ã‚‚æœ‰ç”¨ãªã®ã§`Equatable`ã‚’æ´»ç”¨ã—ã‚ˆã†ã€‚
